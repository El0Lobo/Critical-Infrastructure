{% load i18n %}
<section class="page-block page-block--news-archive" data-block-id="{{ block.id }}">
  <div class="page-block__container">
    <header class="page-block__header">
      {% if props.title %}<h2>{{ props.title }}</h2>{% endif %}
      {% if props.subtitle %}<p class="muted">{{ props.subtitle }}</p>{% endif %}
    </header>
    {% if props.show_search %}
      <form class="news-archive__search" action="{{ news_url }}" method="get">
        <input type="search" name="q" placeholder="{% trans 'Search news…' %}">
        <button type="submit">{% trans "Search" %}</button>
      </form>
    {% endif %}
    {% if props.show_filters and categories %}
      <div class="news-archive__filters">
        {% for cat in categories %}
          <a href="{{ news_url }}?category={{ cat|urlencode }}">{{ cat }}</a>
        {% endfor %}
      </div>
    {% endif %}
    <div class="news-archive__grid">
      {% for post in posts %}
        <article class="news-card--public">
          <p class="news-card--meta">
            {% if post.display_date %}<time datetime="{{ post.published_at }}">{{ post.display_date }}</time>{% endif %}
            {% if post.category %} · <span>{{ post.category }}</span>{% endif %}
          </p>
          <h3><a href="{{ post.url }}">{{ post.title }}</a></h3>
          {% if post.summary %}<p>{{ post.summary }}</p>{% endif %}
        </article>
      {% empty %}
        <p>{% trans "No news available." %}</p>
      {% endfor %}
    </div>
  </div>
</section>
