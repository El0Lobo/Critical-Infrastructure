{% load inline_edit i18n %}
{% if props.style_font_faces %}
  {% for css in props.style_font_faces %}
    <style>{{ css|safe }}</style>
  {% endfor %}
{% endif %}
<section class="page-block page-block--events-compact" {% if props.style_inline %}style="{{ props.style_inline }}"{% endif %}>
  <div class="page-block__container">
    {% if props.title %}
      <div class="page-block__header">
        {% with style=props.style_inline_targets.title %}
          <h2 {% if style %}style="{{ style }}"{% endif %} {% inline_attrs block 'title' %}>{{ props.title|inline_richtext }}</h2>
        {% endwith %}
        {% if props.subtitle %}
          {% with style=props.style_inline_targets.subtitle %}
            <p {% if style %}style="{{ style }}"{% endif %} {% inline_attrs block 'subtitle' %}>{{ props.subtitle|inline_richtext }}</p>
          {% endwith %}
        {% endif %}
      </div>
    {% endif %}
    <ul class="page-events-compact">
      {% for event in events %}
        <li class="page-events-compact__item">
          {% if event.effective_start %}
            <time datetime="{{ event.effective_start }}" class="page-events-compact__date">
              {{ event.effective_start|date:"M j Â· H:i" }}
            </time>
          {% endif %}
          <div class="page-events-compact__meta">
            {% if event.url %}
              <a href="{{ event.url }}" class="page-events-compact__title">{{ event.title }}</a>
            {% else %}
              <span class="page-events-compact__title">{{ event.title }}</span>
            {% endif %}
            {% if event.recurrence.description %}
              <span class="page-events-compact__tag">{{ event.recurrence.description }}</span>
            {% endif %}
          </div>
        </li>
      {% empty %}
        <li class="muted">{% trans "No upcoming events yet." %}</li>
      {% endfor %}
    </ul>
  </div>
</section>
