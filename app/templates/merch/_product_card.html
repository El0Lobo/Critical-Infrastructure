{% load i18n %}

{# app/templates/merch/_product_card.html #}
<div class="product-card">
  <a href="{{ product.get_absolute_url }}" class="card h-100 text-decoration-none">
    {% if product.primary_image %}
      <img src="{{ product.primary_image.image.url }}" alt="{{ product.primary_image.alt_text|default:product.name }}" class="card-img-top" style="aspect-ratio: 1/1; object-fit: cover;">
    {% else %}
      <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="aspect-ratio:1/1;">
        <span class="text-muted">{% trans "No image" %}</span>
      </div>
    {% endif %}
    <div class="card-body d-flex flex-column">
      <div class="fw-semibold">{{ product.name }}</div>
      <div class="text-muted small mb-2">{{ product.category.name }}</div>
      <div class="mt-auto">
        {% if product.price %}
          <div class="fw-bold">{{ product.price }}</div>
        {% else %}
          {% with m=product.min_variant_price %}
            {% if m %}<div class="fw-bold">from {{ m }}</div>{% endif %}
          {% endwith %}
        {% endif %}
        <button class="btn btn-sm btn-primary w-100 mt-2">{% trans "Buy" %}</button>
      </div>
    </div>
  </a>
</div>
